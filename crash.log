2023/04/17 13:41:02 [INFO] Packer version: 1.9.0-dev [go1.18.5 darwin arm64]
2023/04/17 13:41:02 Old default config directory found: /Users/jgoldstrich/.packer.d
2023/04/17 13:41:02 [TRACE] discovering plugins in /Users/jgoldstrich/go/bin
2023/04/17 13:41:02 Old default config directory found: /Users/jgoldstrich/.packer.d
2023/04/17 13:41:02 [TRACE] discovering plugins in /Users/jgoldstrich/.packer.d/plugins
2023/04/17 13:41:02 [DEBUG] Discovered plugin: azure = /Users/jgoldstrich/.packer.d/plugins/packer-plugin-azure
2023/04/17 13:41:02 [INFO] found external [arm chroot dtl] builders from azure plugin
2023/04/17 13:41:02 found external [dtlartifact] provisioner from azure plugin
2023/04/17 13:41:02 [TRACE] discovering plugins in .
2023/04/17 13:41:02 [DEBUG] Discovered plugin: azure = /Users/jgoldstrich/workspace/packer-plugin-azure/packer-plugin-azure
2023/04/17 13:41:02 [INFO] found external [arm chroot dtl] builders from azure plugin
2023/04/17 13:41:02 found external [dtlartifact] provisioner from azure plugin
2023/04/17 13:41:02 [INFO] PACKER_CONFIG env var not set; checking the default config file path
2023/04/17 13:41:02 [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/jgoldstrich/.packerconfig
2023/04/17 13:41:02 [WARN] Config file doesn't exist: /Users/jgoldstrich/.packerconfig
2023/04/17 13:41:02 Old default config directory found: /Users/jgoldstrich/.packer.d
2023/04/17 13:41:02 [INFO] Setting cache directory: /Users/jgoldstrich/.cache/packer
2023/04/17 13:41:02 Old default config directory found: /Users/jgoldstrich/.packer.d
2023/04/17 13:41:02 [TRACE] Starting external plugin /Users/jgoldstrich/workspace/packer-plugin-azure/packer-plugin-azure start builder arm
2023/04/17 13:41:02 Starting plugin: /Users/jgoldstrich/workspace/packer-plugin-azure/packer-plugin-azure []string{"/Users/jgoldstrich/workspace/packer-plugin-azure/packer-plugin-azure", "start", "builder", "arm"}
2023/04/17 13:41:02 Waiting for RPC address for: /Users/jgoldstrich/workspace/packer-plugin-azure/packer-plugin-azure
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 Plugin address: unix /var/folders/6v/z7k0gj_n4h9d2nq8pjl_kk200000gq/T/packer-plugin4238778925
2023/04/17 13:41:02 Received unix RPC address for /Users/jgoldstrich/workspace/packer-plugin-azure/packer-plugin-azure: addr is /var/folders/6v/z7k0gj_n4h9d2nq8pjl_kk200000gq/T/packer-plugin4238778925
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 Waiting for connection...
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 Serving a plugin connection...
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 [TRACE] starting builder arm
2023/04/17 13:41:02 Preparing build: azure-arm
2023/04/17 13:41:02 ui: [1;32mazure-arm: output will be in this color.[0m
2023/04/17 13:41:02 ui: 
2023/04/17 13:41:02 Build debug mode: false
2023/04/17 13:41:02 Force build: true
2023/04/17 13:41:02 On error: 
2023/04/17 13:41:02 Waiting on builds to complete...
2023/04/17 13:41:02 Starting build run: azure-arm
2023/04/17 13:41:02 Running builder: azure-arm
2023/04/17 13:41:02 [INFO] (telemetry) Starting builder azure-arm
2023/04/17 13:41:02 ui: [1;32m==> azure-arm: Running builder ...[0m
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 :: Configuration
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 CaptureNamePrefix=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 CaptureContainerName=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 SharedGalleryImageVersionEndOfLifeDate=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 ImagePublisher=MicrosoftWindowsServer
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 ImageOffer=WindowsServer
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 ImageSku=2012-R2-Datacenter
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 ImageVersion=latest
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 ImageUrl=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 CustomManagedImageName=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 CustomManagedImageResourceGroupName=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 Location=South Central US
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 VMSize=Standard_DS2_v2
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 ManagedImageResourceGroupName=wilkentestpkr
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 ManagedImageName=jennasdk
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 ManagedImageStorageAccountType=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 ManagedImageOSDiskSnapshotName=ranch
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 ManagedImageDataDiskSnapshotPrefix=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 ResourceGroupName=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 StorageAccount=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 TempComputeName=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 TempNicName=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 TempResourceGroupName=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 BuildResourceGroupName=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 BuildKeyVaultName=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 BuildKeyVaultSKU=standard
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 DiskEncryptionSetId=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 VirtualNetworkName=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 VirtualNetworkSubnetName=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 VirtualNetworkResourceGroupName=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 CustomDataFile=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 CustomData=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 UserDataFile=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 UserData=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 CustomScript=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 OSType=Windows
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 TempOSDiskName=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 DiskCachingType=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 BootDiagSTGAccount=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 CustomResourcePrefix=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 LicenseType=
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 UserName=packer
2023/04/17 13:41:02 packer-plugin-azure plugin: 2023/04/17 13:41:02 Password=********************************
2023/04/17 13:41:02 ui: [1;32m==> azure-arm: Getting tokens using client secret[0m
2023/04/17 13:41:03 ui: [1;32m==> azure-arm: Getting tokens using client secret[0m
2023/04/17 13:41:03 ui: [0;32m    azure-arm: Creating Azure Resource Manager (ARM) client ...[0m
2023/04/17 13:41:03 packer-plugin-azure plugin: 2023/04/17 13:41:03 Azure request method="GET" request="https://management.azure.com/subscriptions/1f90521a-24f6-4758-ac3d-88d869fb0bf5/resourcegroups/wilkentestpkr?api-version=2018-02-01" body=""
2023/04/17 13:41:03 packer-plugin-azure plugin: 2023/04/17 13:41:03 Azure response method="GET" request="https://management.azure.com/subscriptions/1f90521a-24f6-4758-ac3d-88d869fb0bf5/resourcegroups/wilkentestpkr?api-version=2018-02-01" x-ms-request-id="0cabbdc8-d9b3-43b5-8e1c-60f14e0a9204" body="{\"id\":\"/subscriptions/1f90521a-24f6-4758-ac3d-88d869fb0bf5/resourceGroups/wilkentestpkr\",\"name\":\"wilkentestpkr\",\"location\":\"westus\",\"tags\":{\"DoNotDelete\":\"DoNotDelete\",\"env\":\"packer\"},\"properties\":{\"provisioningState\":\"Succeeded\"}}" status="200 OK"
2023/04/17 13:41:03 packer-plugin-azure plugin: 2023/04/17 13:41:03 Azure request request="https://management.azure.com/subscriptions/1f90521a-24f6-4758-ac3d-88d869fb0bf5/resourceGroups/wilkentestpkr/providers/Microsoft.Compute/images/jennasdk?api-version=2022-03-01" body="" method="GET"
2023/04/17 13:41:03 packer-plugin-azure plugin: 2023/04/17 13:41:03 [DEBUG] POST https://login.microsoftonline.com/0e3e2e88-8caf-41ca-b4da-e3b33b6c52ec/oauth2/v2.0/token
2023/04/17 13:41:04 packer-plugin-azure plugin: 2023/04/17 13:41:04 Azure response x-ms-request-id="e85e9f5e-50f5-4a59-8c6d-ce0734a3987b" body="{\"error\":{\"code\":\"ResourceNotFound\",\"message\":\"The Resource 'Microsoft.Compute/images/jennasdk' under resource group 'wilkentestpkr' was not found. For more details please go to https://aka.ms/ARMResourceNotFoundFix\"}}" status="404 Not Found" method="GET" request="https://management.azure.com/subscriptions/1f90521a-24f6-4758-ac3d-88d869fb0bf5/resourceGroups/wilkentestpkr/providers/Microsoft.Compute/images/jennasdk?api-version=2022-03-01"
2023/04/17 13:41:04 packer-plugin-azure plugin: 2023/04/17 13:41:04 Azure request body="" method="GET" request="https://management.azure.com/subscriptions/1f90521a-24f6-4758-ac3d-88d869fb0bf5/providers/Microsoft.Compute/locations/southcentralus/sharedGalleries/jennatest/images/jennatest?api-version=2021-07-01"
2023/04/17 13:41:04 packer-plugin-azure plugin: 2023/04/17 13:41:04 Azure response status="404 Not Found" method="GET" request="https://management.azure.com/subscriptions/1f90521a-24f6-4758-ac3d-88d869fb0bf5/providers/Microsoft.Compute/locations/southcentralus/sharedGalleries/jennatest/images/jennatest?api-version=2021-07-01" x-ms-request-id="9d2e5d72-2694-4cd3-a4a8-ec288e1a7c55" body="{\r\n  \"error\": {\r\n    \"code\": \"NotFound\",\r\n    \"message\": \"The gallery image jennatest was not found.\"\r\n  }\r\n}"
2023/04/17 13:41:04 packer-plugin-azure plugin: panic: galleryimages.GalleryImagesClient#Get: Failure responding to request: StatusCode=404 -- Original Error: autorest/azure: Service returned an error. Status=404 Code="NotFound" Message="The gallery image jennatest was not found."
2023/04/17 13:41:04 packer-plugin-azure plugin: 
2023/04/17 13:41:04 packer-plugin-azure plugin: goroutine 26 [running]:
2023/04/17 13:41:04 packer-plugin-azure plugin: github.com/hashicorp/packer-plugin-azure/builder/azure/arm.(*Builder).Run(0x140005aca80, {0x105e410c8, 0x14000706300}, {0x105e43b18, 0x14000570120}, {0x105e36640?, 0x14000722040})
2023/04/17 13:41:04 packer-plugin-azure plugin: 	/Users/jgoldstrich/workspace/packer-plugin-azure/builder/azure/arm/builder.go:210 +0x2eec
2023/04/17 13:41:04 packer-plugin-azure plugin: github.com/hashicorp/packer-plugin-sdk/rpc.(*BuilderServer).Run(0x140000d2400, 0x4b00fa8?, 0x140000400e0)
2023/04/17 13:41:04 packer-plugin-azure plugin: 	/Users/jgoldstrich/go/pkg/mod/github.com/hashicorp/packer-plugin-sdk@v0.4.0/rpc/builder.go:120 +0x1e8
2023/04/17 13:41:04 packer-plugin-azure plugin: reflect.Value.call({0x1400028e300?, 0x1400071c090?, 0x13?}, {0x105732e24, 0x4}, {0x1400008aef8, 0x3, 0x3?})
2023/04/17 13:41:04 packer-plugin-azure plugin: 	/opt/homebrew/Cellar/go/1.19.4/libexec/src/reflect/value.go:584 +0x688
2023/04/17 13:41:04 packer-plugin-azure plugin: reflect.Value.Call({0x1400028e300?, 0x1400071c090?, 0x1000140004586c8?}, {0x140004586f8?, 0x1400007e9c0?, 0x140000afcd8?})
2023/04/17 13:41:04 packer-plugin-azure plugin: 	/opt/homebrew/Cellar/go/1.19.4/libexec/src/reflect/value.go:368 +0x90
2023/04/17 13:41:04 packer-plugin-azure plugin: net/rpc.(*service).call(0x140000d3980, 0x8?, 0x0?, 0x14000794020, 0x14000806180, 0x140000afcd8?, {0x105bc91e0?, 0x140000400dc?, 0x140000afc80?}, {0x105b9b2c0?, ...}, ...)
2023/04/17 13:41:04 packer-plugin-azure plugin: 	/opt/homebrew/Cellar/go/1.19.4/libexec/src/net/rpc/server.go:382 +0x20c
2023/04/17 13:41:04 packer-plugin-azure plugin: created by net/rpc.(*Server).ServeCodec
2023/04/17 13:41:04 packer-plugin-azure plugin: 	/opt/homebrew/Cellar/go/1.19.4/libexec/src/net/rpc/server.go:479 +0x378
2023/04/17 13:41:04 [INFO] (telemetry) ending azure-arm
2023/04/17 13:41:04 /Users/jgoldstrich/workspace/packer-plugin-azure/packer-plugin-azure: plugin process exited
2023/04/17 13:41:04 ui error: [1;31mBuild 'azure-arm' errored after 1 second 919 milliseconds: unexpected EOF[0m
2023/04/17 13:41:04 ui: 
==> Wait completed after 1 second 919 milliseconds
2023/04/17 13:41:04 machine readable: error-count []string{"1"}
2023/04/17 13:41:04 ui error: 
==> Some builds didn't complete successfully and had errors:
2023/04/17 13:41:04 machine readable: azure-arm,error []string{"unexpected EOF"}
2023/04/17 13:41:04 ui error: --> azure-arm: unexpected EOF
2023/04/17 13:41:04 ui: 
==> Builds finished but no artifacts were created.
2023/04/17 13:41:04 [INFO] (telemetry) Finalizing.
2023/04/17 13:41:04 waiting for all plugin processes to complete...
